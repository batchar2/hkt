{"ast":null,"code":"import _objectSpread from \"/home/bat/Apps/Vizorlabs/VZA/webui/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/bat/Apps/Vizorlabs/VZA/webui/src/pages/ObjectDetail/ObjectDetail.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { actions as routerActions, createRouteNodeSelector } from 'redux-router5';\nimport ImageMapper from 'react-image-mapper';\nimport { Link } from 'react-router5';\nimport ImageUploader from 'react-images-upload';\nimport { ROUTES } from '../../constants/router.consts';\nimport objectDetailActions from '../../store/actions/object-detail.actions.js';\nimport NotFoundPicture from './notfound.png';\nimport CameraList from '../../components/CameraList';\nimport ObjectActions from '../../components/ObjectActions';\n\nclass ObjectDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: undefined,\n      name: '',\n      picture: null,\n      cameras: []\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"\".concat(axios.defaults.baseURL, \"/api/object/\").concat(objectId)).then(res => {\n      console.error('loadObjectDetail >>>', res.data);\n      this.setState({\n        id: res.data.id,\n        name: res.data.name,\n        picture: res.data.picture,\n        cameras: res.data.cameras\n      }); // dispatch({\n      //     type: constants.GET_OBJECT_DETAIL,\n      //     payload: res.data,\n      // });\n    }); //this.props.loadObjectDetail(this.props.params.id);\n  }\n\n  enterArea(area) {\n    console.error('area', area); //this.props.hoverChanged(this.props.objectDetail, area, true);\n  }\n\n  leaveArea(area) {//this.props.hoverChanged(this.props.objectDetail, area, false);\n  }\n\n  getTipPosition(area) {\n    /*return { top: `${area.center[1]}px`, left: `${area.center[0]}px` };*/\n  }\n\n  mapClicked(area) {}\n\n  render() {\n    let img = NotFoundPicture;\n    let id = 0;\n\n    if (this.props.object) {\n      id = this.props.object.id; //img = this.props.object.picture;\n\n      console.error('obj_detail', img);\n    }\n\n    let mapData = {\n      name: \"my-map\",\n      areas: [] //this.props.object.\n\n    };\n    console.error(\"RENDER 1>\", this.props.object);\n\n    if (this.state.id && this.state.cameras) {\n      console.error(\"RENDER 2>\", this.state);\n\n      for (let i = 0; i < this.state.cameras.length; i++) {\n        let coords = JSON.parse(this.state.cameras[i].position_coords);\n        let camid = this.props.object.cameras[i].id;\n        mapData.areas.push({\n          camid: camid,\n          name: \"camera_\".concat(camid),\n          coords: coords,\n          shape: 'circle',\n          preFillColor: 'red',\n          fillColor: 'red'\n        });\n      }\n    }\n\n    if (!this.props.object.id) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      });\n    } // console.error('mapData>', mapData);\n    // let mapData = {\n    //     name: \"my-map\",\n    //     areas: [\n    //         {\n    //           camid: 1,\n    //           name: \"camera 1\",\n    //           //picture: img,\n    //           coords: [50, 50, 15],\n    //           shape: \"circle\",\n    //           preFillColor: \"blue\",\n    //           fillColor: \"red\"\n    //         },\n    //         {\n    //           camid: 2,\n    //           name: \"camera 2\",\n    //           //picture: img,\n    //           coords: [150, 150, 15],\n    //           shape: \"circle\",\n    //           preFillColor: \"blue\",\n    //           fillColor: \"red\"\n    //         },\n    //         {\n    //           camid: 3,\n    //           name: \"camera 3\",\n    //           //picture: img,\n    //           coords: [250, 250, 15],\n    //           shape: \"circle\",\n    //           preFillColor: \"blue\",\n    //           fillColor: \"red\"\n    //         },\n    //     ],\n    // };\n\n\n    return React.createElement(\"div\", {\n      id: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"content-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"breadcrumb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"\\u041E\\u044A\\u0435\\u043A\\u0442\\u044B\")), React.createElement(\"div\", {\n      className: \"active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, this.props.object.name))), React.createElement(\"div\", {\n      className: \"title-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, this.props.object.name), React.createElement(ObjectActions, {\n      id: this.props.params.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })), React.createElement(ImageMapper, {\n      src: img,\n      map: mapData,\n      onMouseEnter: area => this.enterArea(area),\n      onMouseLeave: area => this.leaveArea(area),\n      onClick: area => this.mapClicked(area),\n      width: 720,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), this.props.object && React.createElement(\"span\", {\n      className: \"tooltip\",\n      style: _objectSpread({}, this.getTipPosition(this.props.object)),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"tooltip-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, this.props.object && this.props.object.name), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: img,\n      width: \"128\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    })))), React.createElement(CameraList, {\n      cameras: this.props.object.cameras,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ObjectDetail; //connect(\n//     state => ({\n//         user: state.user,\n//         object: state.object,\n//     }),\n//     dispatch => ({\n//         // пользователь нажал регистрацию\n//         loadObjectDetail: (objectId) => {\n//             dispatch(objectDetailActions.loadObjectDetail(objectId));\n//         },\n//         hoverChanged: (obj, camera, hoverVal) => {\n//           dispatch(objectDetailActions.hoverChanged(obj, camera, hoverVal));\n//         }\n//     }),\n// )(ObjectDetail);","map":{"version":3,"sources":["/home/bat/Apps/Vizorlabs/VZA/webui/src/pages/ObjectDetail/ObjectDetail.js"],"names":["React","connect","actions","routerActions","createRouteNodeSelector","ImageMapper","Link","ImageUploader","ROUTES","objectDetailActions","NotFoundPicture","CameraList","ObjectActions","ObjectDetail","Component","constructor","props","state","id","undefined","name","picture","cameras","componentDidMount","axios","get","defaults","baseURL","objectId","then","res","console","error","data","setState","enterArea","area","leaveArea","getTipPosition","mapClicked","render","img","object","mapData","areas","i","length","coords","JSON","parse","position_coords","camid","push","shape","preFillColor","fillColor","params"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAASC,OAAO,IAAIC,aAApB,EAAmCC,uBAAnC,QAAkE,eAAlE;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,SAASC,IAAT,QAAqB,eAArB;AAEA,OAAOC,aAAP,MAA0B,qBAA1B;AAEA,SAASC,MAAT,QAAuB,+BAAvB;AACA,OAAOC,mBAAP,MAAgC,8CAAhC;AACA,OAAOC,eAAP,MAA4B,gBAA5B;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,aAAP,MAA0B,gCAA1B;;AAEA,MAAMC,YAAN,SAA2Bb,KAAK,CAACc,SAAjC,CAA2C;AAEvCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,EAAE,EAAEC,SADK;AAETC,MAAAA,IAAI,EAAE,EAFG;AAGTC,MAAAA,OAAO,EAAE,IAHA;AAITC,MAAAA,OAAO,EAAE;AAJA,KAAb;AAMH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChBC,IAAAA,KAAK,CAACC,GAAN,WAAaD,KAAK,CAACE,QAAN,CAAeC,OAA5B,yBAAkDC,QAAlD,GACKC,IADL,CACUC,GAAG,IAAI;AACTC,MAAAA,OAAO,CAACC,KAAR,CAAc,sBAAd,EAAsCF,GAAG,CAACG,IAA1C;AACA,WAAKC,QAAL,CAAc;AACVhB,QAAAA,EAAE,EAAEY,GAAG,CAACG,IAAJ,CAASf,EADH;AAEVE,QAAAA,IAAI,EAAEU,GAAG,CAACG,IAAJ,CAASb,IAFL;AAGVC,QAAAA,OAAO,EAAES,GAAG,CAACG,IAAJ,CAASZ,OAHR;AAIVC,QAAAA,OAAO,EAAEQ,GAAG,CAACG,IAAJ,CAASX;AAJR,OAAd,EAFS,CAQT;AACA;AACA;AACA;AACH,KAbL,EADgB,CAehB;AACH;;AAEDa,EAAAA,SAAS,CAACC,IAAD,EAAO;AACZL,IAAAA,OAAO,CAACC,KAAR,CAAc,MAAd,EAAsBI,IAAtB,EADY,CAEZ;AACH;;AAEDC,EAAAA,SAAS,CAACD,IAAD,EAAO,CACZ;AACH;;AAEDE,EAAAA,cAAc,CAACF,IAAD,EAAO;AACjB;AACH;;AAEDG,EAAAA,UAAU,CAACH,IAAD,EAAO,CAEhB;;AAEDI,EAAAA,MAAM,GAAG;AACL,QAAIC,GAAG,GAAG/B,eAAV;AACA,QAAIQ,EAAE,GAAG,CAAT;;AACA,QAAI,KAAKF,KAAL,CAAW0B,MAAf,EAAuB;AACnBxB,MAAAA,EAAE,GAAG,KAAKF,KAAL,CAAW0B,MAAX,CAAkBxB,EAAvB,CADmB,CAEnB;;AACAa,MAAAA,OAAO,CAACC,KAAR,CAAc,YAAd,EAA4BS,GAA5B;AACH;;AACD,QAAIE,OAAO,GAAG;AACVvB,MAAAA,IAAI,EAAE,QADI;AAEVwB,MAAAA,KAAK,EAAE,EAFG,CAED;;AAFC,KAAd;AAIAb,IAAAA,OAAO,CAACC,KAAR,CAAc,WAAd,EAA2B,KAAKhB,KAAL,CAAW0B,MAAtC;;AACA,QAAI,KAAKzB,KAAL,CAAWC,EAAX,IAAkB,KAAKD,KAAL,CAAWK,OAAjC,EAA0C;AACtCS,MAAAA,OAAO,CAACC,KAAR,CAAc,WAAd,EAA2B,KAAKf,KAAhC;;AACA,WAAK,IAAI4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5B,KAAL,CAAWK,OAAX,CAAmBwB,MAAvC,EAA+CD,CAAC,EAAhD,EAAoD;AAChD,YAAIE,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAW,KAAKhC,KAAL,CAAWK,OAAX,CAAmBuB,CAAnB,EAAsBK,eAAjC,CAAb;AACA,YAAIC,KAAK,GAAG,KAAKnC,KAAL,CAAW0B,MAAX,CAAkBpB,OAAlB,CAA0BuB,CAA1B,EAA6B3B,EAAzC;AACAyB,QAAAA,OAAO,CAACC,KAAR,CAAcQ,IAAd,CAAmB;AACfD,UAAAA,KAAK,EAAEA,KADQ;AAEf/B,UAAAA,IAAI,mBAAY+B,KAAZ,CAFW;AAGfJ,UAAAA,MAAM,EAAEA,MAHO;AAIfM,UAAAA,KAAK,EAAE,QAJQ;AAKfC,UAAAA,YAAY,EAAE,KALC;AAMfC,UAAAA,SAAS,EAAE;AANI,SAAnB;AAQH;AACJ;;AACD,QAAI,CAAC,KAAKvC,KAAL,CAAW0B,MAAX,CAAkBxB,EAAvB,EAA2B;AACvB,aAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAR;AACH,KA9BI,CA+BL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,WACE;AAAK,MAAA,EAAE,EAAC,SAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK;AAAG,MAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAAL,CADJ,EAEI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwB;AAAG,MAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAa,KAAKF,KAAL,CAAW0B,MAAX,CAAkBtB,IAA/B,CAAxB,CAFJ,CADJ,EAKI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKJ,KAAL,CAAW0B,MAAX,CAAkBtB,IAAvB,CADJ,EAEI,oBAAC,aAAD;AAAe,MAAA,EAAE,EAAE,KAAKJ,KAAL,CAAWwC,MAAX,CAAkBtC,EAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CALJ,EASI,oBAAC,WAAD;AACI,MAAA,GAAG,EAAEuB,GADT;AAEI,MAAA,GAAG,EAAEE,OAFT;AAGI,MAAA,YAAY,EAAEP,IAAI,IAAI,KAAKD,SAAL,CAAeC,IAAf,CAH1B;AAII,MAAA,YAAY,EAAEA,IAAI,IAAI,KAAKC,SAAL,CAAeD,IAAf,CAJ1B;AAKI,MAAA,OAAO,EAAEA,IAAI,IAAI,KAAKG,UAAL,CAAgBH,IAAhB,CALrB;AAMI,MAAA,KAAK,EAAE,GANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,EAkBQ,KAAKpB,KAAL,CAAW0B,MAAX,IACA;AAAM,MAAA,SAAS,EAAC,SAAhB;AAA0B,MAAA,KAAK,oBAAO,KAAKJ,cAAL,CAAoB,KAAKtB,KAAL,CAAW0B,MAA/B,CAAP,CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM,KAAK1B,KAAL,CAAW0B,MAAX,IAAqB,KAAK1B,KAAL,CAAW0B,MAAX,CAAkBtB,IAD7C,CADJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,GAAG,EAAEqB,GAAV;AAAe,MAAA,KAAK,EAAC,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAJJ,CAnBR,CADJ,EA8BI,oBAAC,UAAD;AAAY,MAAA,OAAO,EAAE,KAAKzB,KAAL,CAAW0B,MAAX,CAAkBpB,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA9BJ,CADF;AAkCH;;AAlJsC;;AAqJ3C,eAAeT,YAAf,C,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React from 'react';\nimport {connect} from 'react-redux';\nimport { actions as routerActions, createRouteNodeSelector } from 'redux-router5';\nimport ImageMapper from 'react-image-mapper';\nimport { Link } from 'react-router5';\n\nimport ImageUploader from 'react-images-upload';\n\nimport { ROUTES } from '../../constants/router.consts';\nimport objectDetailActions from '../../store/actions/object-detail.actions.js';\nimport NotFoundPicture from './notfound.png';\nimport CameraList from '../../components/CameraList'\nimport ObjectActions from '../../components/ObjectActions'\n\nclass ObjectDetail extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            id: undefined,\n            name: '',\n            picture: null,\n            cameras: [],\n        };\n    }\n\n    componentDidMount() {\n        axios.get(`${axios.defaults.baseURL}/api/object/${objectId}`)\n            .then(res => {\n                console.error('loadObjectDetail >>>', res.data);\n                this.setState({\n                    id: res.data.id,\n                    name: res.data.name,\n                    picture: res.data.picture,\n                    cameras: res.data.cameras,\n                })\n                // dispatch({\n                //     type: constants.GET_OBJECT_DETAIL,\n                //     payload: res.data,\n                // });\n            });\n        //this.props.loadObjectDetail(this.props.params.id);\n    }\n\n    enterArea(area) {\n        console.error('area', area);\n        //this.props.hoverChanged(this.props.objectDetail, area, true);\n    }\n\n    leaveArea(area) {\n        //this.props.hoverChanged(this.props.objectDetail, area, false);\n    }\n\n    getTipPosition(area) {\n        /*return { top: `${area.center[1]}px`, left: `${area.center[0]}px` };*/\n    }\n\n    mapClicked(area) {\n\n    }\n\n    render() {\n        let img = NotFoundPicture;\n        let id = 0;\n        if (this.props.object) {\n            id = this.props.object.id;\n            //img = this.props.object.picture;\n            console.error('obj_detail', img);\n        }\n        let mapData = {\n            name: \"my-map\",\n            areas: []//this.props.object.\n        };\n        console.error(\"RENDER 1>\", this.props.object);\n        if (this.state.id &&  this.state.cameras) {\n            console.error(\"RENDER 2>\", this.state);\n            for (let i = 0; i < this.state.cameras.length; i++) {\n                let coords = JSON.parse(this.state.cameras[i].position_coords);\n                let camid = this.props.object.cameras[i].id;\n                mapData.areas.push({\n                    camid: camid,\n                    name: `camera_${camid}`,\n                    coords: coords,\n                    shape: 'circle',\n                    preFillColor: 'red',\n                    fillColor: 'red',\n                });\n            }\n        }\n        if (!this.props.object.id) {\n            return (<div></div>);\n        }\n        // console.error('mapData>', mapData);\n        // let mapData = {\n        //     name: \"my-map\",\n        //     areas: [\n        //         {\n        //           camid: 1,\n        //           name: \"camera 1\",\n        //           //picture: img,\n        //           coords: [50, 50, 15],\n        //           shape: \"circle\",\n        //           preFillColor: \"blue\",\n        //           fillColor: \"red\"\n        //         },\n        //         {\n        //           camid: 2,\n        //           name: \"camera 2\",\n        //           //picture: img,\n        //           coords: [150, 150, 15],\n        //           shape: \"circle\",\n        //           preFillColor: \"blue\",\n        //           fillColor: \"red\"\n        //         },\n        //         {\n        //           camid: 3,\n        //           name: \"camera 3\",\n        //           //picture: img,\n        //           coords: [250, 250, 15],\n        //           shape: \"circle\",\n        //           preFillColor: \"blue\",\n        //           fillColor: \"red\"\n        //         },\n        //     ],\n        // };\n        return (\n          <div id=\"content\">\n              <div className=\"content-wrapper\">\n                  <div className=\"breadcrumb\">\n                      <div><a href=\"#\">Оъекты</a></div>\n                      <div className=\"active\"><a href=\"#\">{this.props.object.name}</a></div>\n                  </div>\n                  <div className=\"title-wrapper\">\n                      <h2>{this.props.object.name}</h2>\n                      <ObjectActions id={this.props.params.id}/>\n                  </div>\n                  <ImageMapper\n                      src={img}\n                      map={mapData}\n                      onMouseEnter={area => this.enterArea(area)}\n                      onMouseLeave={area => this.leaveArea(area)}\n                      onClick={area => this.mapClicked(area)}\n                      width={720}\n                      />\n                  {\n                      this.props.object &&\n                      <span className=\"tooltip\" style={{ ...this.getTipPosition(this.props.object)}}>\n                          <div className=\"tooltip-header\">\n                              { this.props.object && this.props.object.name }\n                          </div>\n                          <div>\n                              <img src={img} width=\"128\"/>\n                          </div>\n                      </span>\n                  }\n              </div>\n              <CameraList cameras={this.props.object.cameras}/>\n          </div>\n        );\n    }\n}\n\nexport default ObjectDetail;\n//connect(\n//     state => ({\n//         user: state.user,\n//         object: state.object,\n//     }),\n//     dispatch => ({\n//         // пользователь нажал регистрацию\n//         loadObjectDetail: (objectId) => {\n//             dispatch(objectDetailActions.loadObjectDetail(objectId));\n//         },\n//         hoverChanged: (obj, camera, hoverVal) => {\n//           dispatch(objectDetailActions.hoverChanged(obj, camera, hoverVal));\n//         }\n//     }),\n// )(ObjectDetail);\n"]},"metadata":{},"sourceType":"module"}